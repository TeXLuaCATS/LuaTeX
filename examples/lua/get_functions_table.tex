\directlua{
  local t = lua.get_functions_table()

  t[1] = function (slot)
    print(slot)
  end

  t[2] = function (slot)
    print(slot)
  end

  local index = 1
  while t[index] do
    index = index + 1
  end

  t[index] = function(slot)
    print(slot)
  end
}

\luafunction 1
\luafunction 2
\luafunction 3

\bye
